<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Produk Rekomendasi â€“ SkinQu</title>
<link rel="stylesheet" href="assets/css/cssproduct.css">
</head>

<body>

<div class="topbar">
  <span>Produk Rekomendasi </span>
</div>

<div class="product-grid" id="productGrid"></div>

<div class="bottom-nav">

  <div class="nav-item" data-page="index.html">
    <a href="index.html">
      <img src="assets/img/home.png" alt="Home">
    </a>
  </div>

  <div class="nav-item search-wrapper" data-page="recom.html">
    <a href="recom.html" class="search-icon">
      <img src="assets/img/search.png" alt="Search">
    </a>
  </div>

  <div class="nav-item" data-page="favorite.html">
    <a href="favorite.html">
      <img src="assets/img/heart.png" alt="Favorite">
    </a>
  </div>

  <div class="nav-item" data-page="profile.html">
    <a href="profile.html">
      <img src="assets/img/user.png" alt="Profile">
    </a>
  </div>

</div>

<script>
// =======================
// SUPABASE CONFIG
// =======================
const SUPABASE_URL = "https://bnawrgrhmvkyzkixlbkc.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJuYXdyZ3JobXZreXpraXhsYmtjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2NDA2MDUsImV4cCI6MjA4MTIxNjYwNX0.msUs2RMnJqAs086mkV4FTNIEOHb_3i-hGX5B0sWtolg";

// =======================
const MAX = 6;
const grid = document.getElementById("productGrid");

// SKELETON (FIXED HEIGHT)
for (let i = 0; i < MAX; i++) {
  grid.innerHTML += `
    <div class="product-card">
      <img src="https://via.placeholder.com/300x200?text=SkinQu">
      <div class="product-name">Menyiapkan rekomendasi...</div>
      <div class="product-price">Rp --</div>
      <button class="buy-btn" disabled>Pesan Produk</button>
    </div>
  `;
}

// FETCH SUPABASE
fetch(`${SUPABASE_URL}/rest/v1/rekomendasi_produk?select=*&limit=${MAX}`, {
  headers: {
    apikey: SUPABASE_ANON_KEY,
    Authorization: "Bearer " + SUPABASE_ANON_KEY
  }
})
.then(res => res.json())
.then(data => {
  grid.innerHTML = "";

  data.forEach(p => {
    const q = encodeURIComponent(p.nama);

    grid.innerHTML += `
      <div class="product-card">
        <img src="https://via.placeholder.com/300x200?text=SkinQu">
        <div class="product-name">${p.nama}</div>
        <div class="product-price">${p.harga}</div>
        <button class="buy-btn"
          onclick="window.open('https://shopee.co.id/search?keyword=${q}','_blank')">
          Pesan Produk
        </button>
      </div>
    `;
  });
});
</script>

</body>
</html>
